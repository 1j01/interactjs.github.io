<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>/interact.js-master/packages/core/InteractEvent.ts - Documentation</title>

    <script src="/api/scripts/prettify/prettify.js"></script>
    <script src="/api/scripts/prettify/lang-css.js"></script>
    <script src="/javascripts/api/index.bundle.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="/api/styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="/api/styles/jsdoc-default.css">
    <link href="/stylesheets/main.css" rel="stylesheet" />
    <link href="/stylesheets/adv.css" rel="stylesheet" />
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
<a href="/">    <img src="/images/ijs.svg" class="logo" alt="interact.js" title="Homepage" />
</a>
  <a class="tags has-addons is-inline-flex" href="https://www.npmjs.com/package/interactjs/v/1.4.0-rc.13">
  <span class="tag is-light">version</span>
  <span class="tag is-warning">
    1.4.0-rc.13
  </span>
</a>


  <li class="nav-link nav-home-link"><a href="/api/index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="/api/DropEvent.html">DropEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/DropEvent.html#reject">reject</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="/api/Interactable.html">Interactable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#context">context</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#deltaSource">deltaSource</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#draggable">draggable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#dropCheck">dropCheck</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#dropzone">dropzone</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#fire">fire</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#gesturable">gesturable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#getRect">getRect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#on">on</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#origin">origin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#rectChecker">rectChecker</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#reflow">reflow</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#resizable">resizable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#set">set</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/Interactable.html#unset">unset</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="/api/InteractEvent_InteractEvent.html">InteractEvent</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="/api/module.exports.html">exports</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="/api/module-interact.html">interact</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/module-interact.html#.maxInteractions">maxInteractions</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="/api/module-modifiers_snapEdges.html">modifiers/snapEdges</a></span></li><li class="nav-heading"><a href="/api/global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="/api/global.html#interact">interact</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/global.html#preventDefault">preventDefault</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/global.html#stopImmediatePropagation">stopImmediatePropagation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="/api/global.html#stopPropagation">stopPropagation</a></span></li>

</nav>

<div class="code-col-bg">
</div>

<main id="main">
  <section class="is-paddingless">
    <div class="navbar is-dark is-hidden-mobile" role="navigation" aria-label="navigation">
      <div class="navbar-end is-flex">
        <div class="navbar-item is-paddingless has-dropdown is-hoverable is-mobile">


    <div class="navbar-link">
      <img src="/images/doc.svg" class="is-hidden-mobile white-icon" alt="Guide" />

      Guide
    </div>

    <div class="navbar-dropdown" aria-label="dropdown">
      <a href="/docs/" class="navbar-item">
        Intro
      </a>
      <a href="/docs/draggable" class="navbar-item">
        Draggable
      </a>
      <a href="/docs/resizable" class="navbar-item">
        resizable
      </a>
      <a href="/docs/gesturable" class="navbar-item">
        Gesturable
      </a>
      <a href="/docs/dropzone" class="navbar-item">
        Dropzone
      </a>
      <a href="/docs/action_options" class="navbar-item">
        Action Options
      </a>
      <a href="/docs/events" class="navbar-item">
        Events
      </a>
      <a href="/docs/modifiers" class="navbar-item">
        Modifiers
      </a>
      <a href="/docs/snapping" class="navbar-item">
        Snapping
      </a>
      <a href="/docs/restriction" class="navbar-item">
        Restriction
      </a>
      <a href="/docs/inertia" class="navbar-item">
        Inertia
      </a>
      <a href="/docs/reflow" class="navbar-item">
        Reflow
      </a>
      <a href="/docs/faq" class="navbar-item">
        FAQ
      </a>
      <a href="/api" class="navbar-item">
        API
      </a>
    </div>


</div>
  <div class="navbar-item is-paddingless is-mobile">

  <a href="https://github.com/taye/interact.js" class="navbar-link is-arrowless">
      <img src="/images/code.svg" class="is-hidden-mobile white-icon" alt="Code" />

    &nbsp;Source
  </a>

</div>
  <div class="navbar-item is-paddingless is-mobile">

  <a href="https://gitter.im/taye/interact.js" class="navbar-link is-arrowless">
      <img src="/images/chat.svg" class="is-hidden-mobile white-icon" alt="Gitter" />

    Chat
  </a>

</div>
  <div class="navbar-item is-paddingless is-mobile">

  <a href="https://twitter.com/interactjs" class="navbar-link is-arrowless">
      <img src="/images/bird.svg" class="is-hidden-mobile white-icon" alt="Bird" />

    @interactjs
  </a>

</div>

      </div>
    </div>
  </section>

  
  <h1 class="page-title">/interact.js-master/packages/core/InteractEvent.ts</h1>
  

  



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import extend from '@interactjs/utils/extend'
import getOriginXY from '@interactjs/utils/getOriginXY'
import hypot from '@interactjs/utils/hypot'
import defaults from './defaultOptions'
import Interactable from './Interactable'
import Interaction from './Interaction'
import { ActionName } from './scope'

export enum EventPhase {
  Start = 'start',
  Move = 'move',
  End = 'end',
  _NONE = '',
}

export class InteractEvent&lt;
  T extends ActionName = any,
  P extends EventPhase = EventPhase._NONE,
> {
  type: string
  target: Element
  relatedTarget: Element | null
  currentTarget: Element
  screenX?: number
  screenY?: number
  button: number
  buttons: number
  ctrlKey: boolean
  shiftKey: boolean
  altKey: boolean
  metaKey: boolean
  // added by interact.js
  interactable: Interactable
  interaction: Interaction&lt;T>
  page: Interact.Point
  client: Interact.Point
  delta: Interact.Point
  rect: Required&lt;Interact.Rect>
  x0: number
  y0: number
  t0: number
  dt: number
  duration: number
  clientX0: number
  clientY0: number
  velocity: Interact.Point
  speed: number
  swipe: ReturnType&lt;InteractEvent&lt;T>['getSwipe']>
  timeStamp: any
  // drag
  dragEnter?: Element
  dragLeave?: Element
  // resize
  axes?: Interact.Point
  preEnd?: boolean
  immediatePropagationStopped = false
  propagationStopped = false

  /** */
  constructor (
    interaction: Interaction,
    event: Interact.PointerEventType,
    actionName: T,
    phase: P,
    element: Element,
    related?: Element,
    preEnd?: boolean,
    type?: string,
  ) {
    element = element || interaction.element

    const target      = interaction.interactable
    // FIXME: add deltaSource to defaults
    const deltaSource = (((target &amp;&amp; target.options) || defaults) as any).deltaSource as 'page' | 'client'
    const origin      = getOriginXY(target, element, actionName)
    const starting    = phase === 'start'
    const ending      = phase === 'end'
    const prevEvent   = starting ? this : interaction.prevEvent
    const coords      = starting
      ? interaction.coords.start
      : ending
        ? { page: prevEvent.page, client: prevEvent.client, timeStamp: interaction.coords.cur.timeStamp }
        : interaction.coords.cur

    this.page      = extend({}, coords.page)
    this.client    = extend({}, coords.client)
    this.rect      = extend({}, interaction.rect)
    this.timeStamp = coords.timeStamp

    if (!ending) {
      this.page.x -= origin.x
      this.page.y -= origin.y

      this.client.x -= origin.x
      this.client.y -= origin.y
    }

    this.ctrlKey       = event.ctrlKey
    this.altKey        = event.altKey
    this.shiftKey      = event.shiftKey
    this.metaKey       = event.metaKey
    this.button        = (event as MouseEvent).button
    this.buttons       = (event as MouseEvent).buttons
    this.target        = element
    this.currentTarget = element
    this.relatedTarget = related || null
    this.preEnd        = preEnd
    this.type          = type || (actionName + (phase || ''))
    this.interaction   = interaction
    this.interactable  = target

    this.t0 = starting
      ? interaction.pointers[interaction.pointers.length - 1].downTime
      : prevEvent.t0

    this.x0       = interaction.coords.start.page.x - origin.x
    this.y0       = interaction.coords.start.page.y - origin.y
    this.clientX0 = interaction.coords.start.client.x - origin.x
    this.clientY0 = interaction.coords.start.client.y - origin.y

    if (starting || ending) {
      this.delta = { x: 0, y: 0 }
    }
    else {
      this.delta = {
        x: this[deltaSource].x - prevEvent[deltaSource].x,
        y: this[deltaSource].y - prevEvent[deltaSource].y,
      }
    }

    this.dt        = interaction.coords.delta.timeStamp
    this.duration  = this.timeStamp - this.t0

    // velocity and speed in pixels per second
    this.velocity = extend({}, interaction.coords.velocity[deltaSource])
    this.speed = hypot(this.velocity.x, this.velocity.y)

    this.swipe = (ending || phase === 'inertiastart') ? this.getSwipe() : null
  }

  get pageX () { return this.page.x }
  set pageX (value) { this.page.x = value }
  get pageY () { return this.page.y }
  set pageY (value) { this.page.y = value }

  get clientX () { return this.client.x }
  set clientX (value) { this.client.x = value }
  get clientY () { return this.client.y }
  set clientY (value) { this.client.y = value }

  get dx () { return this.delta.x }
  set dx (value) { this.delta.x = value }
  get dy () { return this.delta.y }
  set dy (value) { this.delta.y = value }

  get velocityX () { return this.velocity.x }
  set velocityX (value) { this.velocity.x = value }
  get velocityY () { return this.velocity.y }
  set velocityY (value) { this.velocity.y = value }

  getSwipe () {
    const interaction = this.interaction

    if (interaction.prevEvent.speed &lt; 600 ||
        this.timeStamp - interaction.prevEvent.timeStamp > 150) {
      return null
    }

    let angle = 180 * Math.atan2(interaction.prevEvent.velocityY, interaction.prevEvent.velocityX) / Math.PI
    const overlap = 22.5

    if (angle &lt; 0) {
      angle += 360
    }

    const left = 135 - overlap &lt;= angle &amp;&amp; angle &lt; 225 + overlap
    const up   = 225 - overlap &lt;= angle &amp;&amp; angle &lt; 315 + overlap

    const right = !left &amp;&amp; (315 - overlap &lt;= angle || angle &lt;  45 + overlap)
    const down  = !up   &amp;&amp;   45 - overlap &lt;= angle &amp;&amp; angle &lt; 135 + overlap

    return {
      up,
      down,
      left,
      right,
      angle,
      speed: interaction.prevEvent.speed,
      velocity: {
        x: interaction.prevEvent.velocityX,
        y: interaction.prevEvent.velocityY,
      },
    }
  }

  preventDefault () {}

  /**
   * Don't call listeners on the remaining targets
   */
  stopImmediatePropagation () {
    this.immediatePropagationStopped = this.propagationStopped = true
  }

  /**
   * Don't call any other listeners (even on the current target)
   */
  stopPropagation () {
    this.propagationStopped = true
  }
}

export default InteractEvent
</code></pre>
        </article>
    </section>





  <div class="ad-padding"></div>
</main>

<div class="ad-wrap code-col-bg">
  <div id="ad-contain">
    <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYIK2J7&placement=interactjsio" id="_carbonads_js"></script>
 </div>
</div>

<script>prettyPrint();</script>
<script src="/api/scripts/linenumber.js"></script>
</body>
</html>
